{% extends 'base.html.twig' %}

{% block title %}Snowtricks - {{ item.title }}{% endblock %}

{% set img_header = asset('uploads/pictures/' ~ item.mainPicture) %}

{% block h1 %}
    <h1 class="uk-text-uppercase">{{ item.title }}</h1>
{% endblock %}

{% block body %}

    {% if app.user %}
        <div class="uk-padding-small uk-text-right">
            <a href="{{ path('trick_edit', { slug: item.slug }) }}" class="uk-button uk-button-primary uk-margin-right"><span uk-icon="pencil"></span></a>
            <a onclick="return confirm('Do you really want to delete this trick?');" href="{{ path('trick_delete', { slug: item.slug }) }}" class="uk-button uk-button-danger trick-delete"><span uk-icon="trash"></span></a>
        </div>
    {% endif %}

    <div uk-slider>

        <div class="uk-position-relative">

            <div class="uk-slider-container uk-dark">
                <ul class="uk-slider-items uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m uk-grid-small">
                    {% for k, image in item.images %}
                        {% if image.name %}
                            <li>
                                <a href="#modal-media-image-{{ k }}" uk-toggle>
                                    <img src="{{ asset('uploads/pictures/' ~ image.name) }}" alt="{{ image.alt }}" class="img-slide--trick-show">
                                </a>

                                <div id="modal-media-image-{{ k }}" class="uk-flex-top" uk-modal>
                                    <div class="uk-modal-dialog uk-width-auto uk-margin-auto-vertical">
                                        <button class="uk-modal-close-outside" type="button" uk-close></button>
                                        <img src="{{ asset('uploads/pictures/' ~ image.name) }}" width="285" height="250" alt="{{ image.alt }}">
                                    </div>
                                </div>
                            </li>
                        {% endif %}
                    {% endfor %}

                    {% for k, video in item.videos %}
                        {% if video.url %}
                            <li>
                                <a href="#modal-media-video-{{ k }}" uk-toggle>
                                    <div class="video-layer">
                                        <iframe src="{{ video.url }}" controls="false" width="285" height="250" frameborder="0"></iframe>
                                    </div>
                                </a>

                                <div id="modal-media-video-{{ k }}" class="uk-flex-top" uk-modal>
                                    <div class="uk-modal-dialog uk-width-auto uk-margin-auto-vertical">
                                        <button class="uk-modal-close-outside" type="button" uk-close></button>
                                        <iframe src="{{ video.url }}" width="1024" height="720" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                                    </div>
                                </div>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>

            <div class="uk-hidden@s uk-light">
                <a class="uk-position-center-left uk-position-small" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                <a class="uk-position-center-right uk-position-small" href="#" uk-slidenav-next uk-slider-item="next"></a>
            </div>

            <div class="uk-visible@s">
                <a class="uk-position-center-left-out uk-position-small" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                <a class="uk-position-center-right-out uk-position-small" href="#" uk-slidenav-next uk-slider-item="next"></a>
            </div>

        </div>

        <ul class="uk-slider-nav uk-dotnav uk-flex-center uk-margin"></ul>

    </div>

    <div class="trick-desc uk-margin-large-top">
        <p>{{ item.introtext }}</p>
        <p>{{ item.content }}</p>
    </div>

    <div class="trick-info uk-margin-top uk-text-center">
        <span class="uk-badge"><i uk-icon="icon: info; ratio: 0.8;" class="uk-margin-small-right"></i> {{ item.category.name }}</span>
        <span class="uk-badge"><i uk-icon="icon: clock; ratio: 0.8;" class="uk-margin-small-right"></i> {{ item.createdAt|date('d F Y H:i') }}</span>
        <span class="uk-badge"><i uk-icon="icon: clock; ratio: 0.8;" class="uk-margin-small-right"></i> {{ item.updateAt|date('d F Y H:i') }}</span>
        <span class="uk-badge"><i uk-icon="icon: user; ratio: 0.8;" class="uk-margin-small-right"></i> {{ item.author.name }}</span>
    </div>

    <hr>

{% endblock %}
